var LINE_NO = require('./utils');

exports.default = function (_ref) {
  var t = _ref.types;
  var visitor = { 
    CallExpression: function(path, state) {1
	  	if (path.node.callee.object && path.node.callee.object.name == "Android") {
	  		if (path.node.callee.property.name == "runInUI") {
	  			var fileName = state.file.log.filename !== "unknown" ? state.file.log.filename : null;
	  			var args = path.node.arguments;
	  			var lineNo = path.container.loc.start.line + '';
	  			var toSearch = lineNo + fileName;

	  			if (LINE_NO.indexOf(toSearch) < 0)  {
	  				args.push(t.stringLiteral(lineNo));	
	    			args.push(t.stringLiteral(fileName.replace(/[^a-zA-Z ]/g, "")));		
	    			LINE_NO.push(toSearch);
	  			}
	  		}
	  	}
  	}
  };

  return {
    visitor: visitor
  };
};

module.exports = exports["default"];